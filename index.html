<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Mark First Response</title>
    <style>
        :root {
            --dark-blue: #1D2939; /* Header background */
            --teal: #55ABC9; /* Primary accent color */
            --light-mint: #F6FAFC; /* Background color */
            --border-color: #E4E7EC;
            --text-primary: #1D2939;
            --text-secondary: #667085;
            --highlight: #787ABB; /* For highlighting selected items */
            
            /* IP Type Colors */
            --patent-color: #1DA7AF;
            --trade-mark-color: #DE4326;
            --design-color: #84C98F;
            --pbr-color: #F1AC1E;
            --copyright-color: #787ABB;
            --any-color: #667085;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: var(--text-primary);
            background-color: var(--light-mint);
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px; /* Increased side padding */
        }
        
        .two-column-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }
        
        .sidebar {
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .question-sidebar {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(16, 24, 40, 0.15);
            padding: 24px;
            border-left: 3px solid var(--highlight);
            margin-bottom: 20px;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            color: var(--teal);
        }

        h2 {
            font-size: 22px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background-color: var(--dark-blue);
            color: white;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 22px;
            font-weight: 600;
        }

        .nav a {
            color: white;
            text-decoration: none;
            margin-left: 30px;
        }

        .main-content {
            padding: 40px 0;
        }

        .title-section {
            margin-bottom: 20px;
        }

        .summary-box {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
            padding: 16px;
            margin-bottom: 30px;
            border-left: 3px solid var(--teal);
            font-size: 18px;
            font-weight: 500;
        }

        .filter-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(16, 24, 40, 0.15);
            padding: 24px;
            margin-bottom: 30px;
            border-left: 3px solid var(--highlight);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .question-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .skip-option {
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            text-decoration: underline;
        }
        
        .summary-indicator {
            background-color: var(--teal);
            color: white;
            padding: 12px;
            border-radius: 6px;
            margin-top: 20px;
            font-weight: 500;
            text-align: center;
        }
        
        .filter-list-container {
            margin-top: 24px;
        }
        
        .filter-list-container h3 {
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .filter-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .filter-list li {
            background-color: rgba(85, 171, 201, 0.1);
            border-radius: 4px;
            padding: 8px 12px;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--teal);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .remove-filter {
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 16px;
            padding: 0 4px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
        }
        
        .remove-filter:hover {
            background-color: rgba(102, 112, 133, 0.1);
            color: #DE4326;
        }

        .feedback-message {
            background-color: #F0F9FF;
            border-radius: 6px;
            padding: 12px;
            margin-top: 15px;
            color: var(--teal);
            font-weight: 500;
            text-align: center;
        }

/* Replace your current card-grid styling with this */
.card-grid {
    position: relative;
    display: flex;
    flex-wrap: wrap;
    margin: -30px -15px; /* Negative margin to offset the padding we'll add to cards */
}

.card {
    flex: 0 0 calc(33.333% - 30px); /* For 3 columns */
    margin: 30px 15px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
    padding: 24px;
    border-left: 3px solid var(--teal);
    transition: transform 0.5s ease, opacity 0.5s ease;
    position: relative;
    /* Remove any fixed height that might be present */
}

/* Apply staggered effect */
.card:nth-child(3n+2) {
    transform: translateY(40px);
}

.card:nth-child(3n+3) {
    transform: translateY(80px);
}

/* For medium screens - 2 column layout */
@media (max-width: 991px) and (min-width: 768px) {
    .card {
        flex: 0 0 calc(50% - 30px); /* For 2 columns */
    }
    
    /* Reset the 3-column transforms */
    .card:nth-child(3n+2),
    .card:nth-child(3n+3) {
        transform: none;
    }
    
    /* Apply 2-column staggering */
    .card:nth-child(even) {
        transform: translateY(50px);
    }
}

/* For mobile screens */
@media (max-width: 767px) {
    .card {
        flex: 0 0 calc(100% - 30px); /* Single column */
    }
    
    /* Reset all transforms for mobile */
    .card:nth-child(3n+2),
    .card:nth-child(3n+3),
    .card:nth-child(even) {
        transform: none;
    }
}
        

        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
            padding: 24px;
            margin-bottom: 20px;
            border-left: 3px solid var(--teal);
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        .card.filtered {
            opacity: 0.5;
            border-left: 3px solid var(--border-color);
        }

        .card-title {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 6px;
        }

        .card-overtitle {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .feature-tag {
            display: inline-block;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
            margin-bottom: 5px;
        }

        .tag-trade-mark {
            background-color: rgba(222, 67, 38, 0.1);
            color: var(--trade-mark-color);
        }

        .tag-any {
            background-color: rgba(102, 112, 133, 0.1);
            color: var(--any-color);
        }

        .response-tag {
            display: inline-block;
            background-color: rgba(85, 171, 201, 0.1);
            color: var(--teal);
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
            margin-bottom: 5px;
        }

        .sort-container {
            margin-bottom: 20px;
        }

        .form-control {
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 16px;
            min-width: 200px;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 3px rgba(85, 171, 201, 0.15);
        }

        .btn {
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background-color: var(--teal);
            color: white;
        }

        .btn-primary:hover {
            background-color: #4799B5;
        }

        .btn-secondary {
            background-color: white;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: #F9FAFB;
        }
        
        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav a {
                margin-left: 15px;
            }
            
            .filter-controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .two-column-layout {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">IP First Response</div>
                <nav class="nav">
                    <a href="#">Home</a>
                    <a href="#">About</a>
                    <a href="#">Contact</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="container main-content">
        <div class="title-section">
            <h1>Options for Trade Marks</h1>
            <p>Discover the most suitable options to help you respond to a trade mark issue.</p>
        </div>

        <div class="two-column-layout">
            <div class="sidebar">
                <div id="question-section" class="question-sidebar">
                    <div class="question-text" id="current-question">Loading question...</div>
                    <div class="question-buttons">
                        <button class="btn btn-primary" id="btn-yes">Yes</button>
                        <span class="skip-option" id="btn-skip">skip</span>
                        <button class="btn btn-secondary" id="btn-no">No</button>
                    </div>
                    
                    <div class="summary-indicator" id="summary-indicator">
                        <span id="summary-count">Loading...</span>
                    </div>
                </div>
                
                <div id="completion-message-container"></div>
                
                <div class="filter-list-container" id="filter-list-container">
                    <h3>Showing:</h3>
                    <ul class="filter-list" id="filter-list">
                        <!-- Filter statements will be added here -->
                    </ul>
                </div>
            </div>
            
            <div class="main-area">
                <div class="filter-controls">
                    <div class="sort-container">
                        <label for="sort-select">Sort by:</label>
                        <select id="sort-select" class="form-control">
                            <option value="random">Random</option>
                            <option value="cost">Estimated cost</option>
                            <option value="time">Estimated time</option>
                            <option value="escalation">Escalation (low to high)</option>
                        </select>
                    </div>
                </div>
                
                <div class="card-grid" id="options-container">
                    <div class="card">
                        <div class="card-overtitle">Loading...</div>
                        <div class="card-title">Loading options...</div>
                        <div class="card-subtitle">Please wait while we load options for you.</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Data for options - this would normally be loaded from a server/database
        const allOptions = [
            {
                "Overtitle": "Trade mark opposition",
                "Main Title": "Challenge the registration of a trade mark",
                "Description": "Initiate a trade mark opposition process against a new trademark with IP Australia",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Trade mark registration revocation",
                "Main Title": "Remove a trade mark from the register",
                "Description": "Let IP Australia know a recently registered trade mark should not have been registered",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Trade mark non-use action",
                "Main Title": "Remove a trade mark from the register",
                "Description": "Request IP Australia removes a trade mark from the register for non-use",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Court - Trade Mark",
                "Main Title": "Seek binding, authoritative decisions",
                "Description": "Escalate a wide range of trade mark matters to court",
                "Response Type": "Enforcement; Accused",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Interim court injuction order",
                "Main Title": "Stop infringing activity immediately",
                "Description": "Lodge an interim injunction order through court",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "World IP Organisation (WIPO) ",
                "Main Title": "Resolve international disputes",
                "Description": "Seek dispute resolution through the WIPO Arbitration and Mediation Center",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Alternative dispute resolution (ADR)",
                "Main Title": "resolve conflicts with the help of experienced facilitators",
                "Description": "Understand more about the options in the ADR space.",
                "Response Type": "Enforcement; Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "ASBFEO",
                "Main Title": "Access help tailored to resolve business disputes",
                "Description": "Australia Small Business & Family Enterprise Ombudsman (ASBFEO).",
                "Response Type": "Enforcement; Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Mediation",
                "Main Title": "Resolve IP issues with the help of a third party",
                "Description": "Invite the other party to enter into mediation to agree to mutually acceptable agreement.",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Arbitration",
                "Main Title": "Resolve IP issues with the help of a third party",
                "Description": "Agree to be bound by the decision of a highly qualified third party assessment.",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Letter of demand",
                "Main Title": "Demand the other party stops infringing",
                "Description": "Send a letter to the infringing party notifying them of potential infringement.",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Informal contact",
                "Main Title": "Provide an opportunity to stop infringement",
                "Description": "Alert the alleged infringer of your registered rights to allow them to stop infringing.",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Informal contact",
                "Main Title": "Respond informally to accusations of IP infringement",
                "Description": "Let the accuser know about your circumstances.",
                "Response Type": "Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Negotiation",
                "Main Title": "Agree to a commercial arrangement",
                "Description": "Work with an IP professional to come to an agreement with another party.",
                "Response Type": "Enforcement; Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Takedown request",
                "Main Title": "Stop infringement facilitated online",
                "Description": "Request infringing material is removed from online marketplaces and platforms.",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark; Copyright"
            },
            {
                "Overtitle": "Report IP crime or safety concerns",
                "Main Title": "Prevent risks to public interest",
                "Description": "Inform Government about risks to public health, crime, counterfeiting, frauds & scams.",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Notice of Objection",
                "Main Title": "Stop infringing goods entering the country",
                "Description": "Lodge a notice of objection with the Australian Border Force.",
                "Response Type": "Enforcement; Proactive",
                "Right it applies to": "Trade mark; Copyright"
            },
            {
                "Overtitle": "IP attorney or lawyer",
                "Main Title": "Obtain legal advice on enforcement options",
                "Description": "Seek a qualified & experienced professional to provide specific, tailored advice.",
                "Response Type": "Enforcement; Proactive; Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "International options",
                "Main Title": "Enforce your IP overseas",
                "Description": "Understand options relating to enforcing your IP overseas. ",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Monitor the situation",
                "Main Title": "Take no immediate action",
                "Description": "Strategically enforce your IP only when worthwhile.",
                "Response Type": "Enforcement; Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Rebrand your business",
                "Main Title": "Avoid potential IP conflicts",
                "Description": "Strategically rebrand your business to avoid disputes.",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "IP insurance",
                "Main Title": "Coverage against potential future infringement",
                "Description": "Protect yourself from certain costs involved in IP disputes",
                "Response Type": "Proactive",
                "Right it applies to": "Patents; Trade mark; Copyright"
            },
            {
                "Overtitle": "Domain Name Dispute (auDRP)",
                "Main Title": "Dispute a domain name that infringes your trade mark",
                "Description": "Dispute an .au domain name that may infringe an IP right",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Domain Name Dispute (UDRP)",
                "Main Title": "Challenge the use of international domain name",
                "Description": "Dispute an international domain name that may infringe an IP right",
                "Response Type": "Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Apply for a trade mark ",
                "Main Title": "Register your trade mark  ",
                "Description": "Strengthen your position as the registered owner of your trade mark in Australia",
                "Response Type": "Proactive; Enforcement",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "Contact intermediaries",
                "Main Title": "Engage with product distributors",
                "Description": "Establish and maintain connections with suppliers, manufacturers, and resellers of your goods.",
                "Response Type": "Proactive; Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "IP audits",
                "Main Title": "Review your IP portfolio",
                "Description": "Understand and assess the health and enforceability of your IP.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Registration",
                "Main Title": "Register your trade mark",
                "Description": "Apply to register your trade mark with IP Australia.",
                "Response Type": "Proactive; Enforcement; Accused ",
                "Right it applies to": "Trade marks"
            },
            {
                "Overtitle": "IP licensing",
                "Main Title": "License your IP rights",
                "Description": "Let others use your trade mark under agreed terms.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Legislation",
                "Main Title": "Understand relevant laws",
                "Description": "Review the laws that protect and govern your trade mark rights.",
                "Response Type": "Proactive",
                "Right it applies to": "Trade marks"
            },
            {
                "Overtitle": "Monitoring service - TMs",
                "Main Title": "Monitor for infringement",
                "Description": "Get alerts when others use similar trade marks.",
                "Response Type": "Proactive",
                "Right it applies to": "Trade marks"
            },
            {
                "Overtitle": "In-house expertise",
                "Main Title": "Employ IP specialists",
                "Description": "Hire specialists to manage your business IP matters.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Customer awareness",
                "Main Title": "Educate your customers",
                "Description": "Help customers recognise and choose your brand above others.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Supply chain protection",
                "Main Title": "Monitor supply chains",
                "Description": "Identify key stakeholders in your product's supply chain to protect your interests.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Proactive strategy",
                "Main Title": "Plan offensive actions",
                "Description": "Implement proactive measures to protect your IP, including legal actions.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Defensive strategy",
                "Main Title": "Implement defensive measures",
                "Description": "Identify ways to protect your business without commencing legal action.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Market presence",
                "Main Title": "Use your IP actively",
                "Description": "Ensure your IP is actively used in the market to maintain rights.",
                "Response Type": "Proactive",
                "Right it applies to": "Trade marks"
            },
            {
                "Overtitle": "Online protection",
                "Main Title": "Register with brand platforms",
                "Description": "Strengthen your standing in online marketplaces like Amazon Brand Registry.",
                "Response Type": "Proactive",
                "Right it applies to": "Trade marks"
            },
            {
                "Overtitle": "Risk assessment",
                "Main Title": "Predict potential infringement",
                "Description": "Determine likely areas of IP infringement to strengthen your response plan.",
                "Response Type": "Proactive",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Register monitoring",
                "Main Title": "Track similar registrations",
                "Description": "Set up alerts when others try to register similar trade marks.",
                "Response Type": "Proactive",
                "Right it applies to": "Trade mark"
            },
            {
                "Overtitle": "IP search",
                "Main Title": "Find and understand existing IP rights",
                "Description": "Discover existing IP rights that may impact your business decisions.",
                "Response Type": "Proactive",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Portfolio expansion",
                "Main Title": "Apply for additional IP rights",
                "Description": "Extend your IP protection by securing additional rights in relevant categories.",
                "Response Type": "Proactive",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Market entry assessment",
                "Main Title": "Request a freedom to operate search",
                "Description": "Determine if your product or service might infringe on existing IP rights.",
                "Response Type": "Proactive",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "IP audits",
                "Main Title": "Commission an IP rights audit",
                "Description": "Obtain a comprehensive assessment of your existing IP assets and protections.",
                "Response Type": "Proactive",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Commercialisation",
                "Main Title": "Develop a strategy to make money from your IP",
                "Description": "Create an integrated plan to leverage your IP assets for business growth.",
                "Response Type": "Proactive",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Negotiate a resolution",
                "Main Title": "Engage constructively with rights holders",
                "Description": "Make mutually beneficial deals with other IP rights owners.",
                "Response Type": "Accused",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "IP valuation",
                "Main Title": "Determine the value of IP",
                "Description": "Get professional assessment of the financial worth of specific intellectual property.",
                "Response Type": "Accused; Enforcement",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "IP assessment",
                "Main Title": "Gather detailed information",
                "Description": "Obtain expert insights about your specific IP situation and options.",
                "Response Type": "Proactive",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Finding an IP professional",
                "Main Title": "Preparing for your IP professional consultation",
                "Description": "Make the most of initial meetings with IP professionals through proper preparation.",
                "Response Type": "Proactive; Accused; Enforcement",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Check for spam",
                "Main Title": "Read their accusation carefully",
                "Description": "Consider their allegations and whether their contact letter seems legitimate",
                "Response Type": "Accused ",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Review their IP",
                "Main Title": "Check the other party's IP",
                "Description": "Make sure they have valid IP and raise any issues with these",
                "Response Type": "Proactive; Accused",
                "Right it applies to": "All types"
            },
            {
                "Overtitle": "Licensing agreements",
                "Main Title": "Review licensing arrangements",
                "Description": "Check any existing licencing agreements to ensure you're complying",
                "Response Type": "Accused ",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Unjust threats",
                "Main Title": "Take action against unjust threats",
                "Description": "Take another party to court for making ungrounded accusions of infringement",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Stop infringing activity",
                "Main Title": "Cease using the IP",
                "Description": "Stop using the IP you're accused of infringing ",
                "Response Type": "Accused",
                "Right it applies to": "Any"
            },
            {
                "Overtitle": "Contact intermediaries",
                "Main Title": "Alert your supply chain to issues",
                "Description": "Ask intermediaries to cease enabling infringement",
                "Response Type": "Enforcement",
                "Right it applies to": "Any"
            }
        ];

        // Filter options to only include those tagged with "Trade mark" or "Any"
        const tradeMarkOptions = allOptions.filter(option => {
            const rightType = option["Right it applies to"];
            return rightType.includes("Trade mark") || 
                   rightType.includes("Trade marks") || 
                   rightType === "Any" || 
                   rightType === "All types";
        });

        // Questions for filtering
const filterQuestions = [
        {
        text: "Are you responding to an issue of suspected or accused infringment?",
        filterProperty: "Response Type",
        filterValue: ["Accused", "Enforcement"],
        filterProperty: "Overtitle",
        filterValue: ["letter of demand", "Informal contact", "IP attorney"], 
        expectedAnswer: "Yes"
    },
    {
        text: "Are goods relating to your trade mark being imported into Australia?",
        filterProperty: "Overtitle",
        filterValue: ["letter of demand", "intermediaries", "Notice of Objection", "IP attorney"],
        expectedAnswer: "Yes"
    },
    {
        text: "Is this dispute related to online marketplace or ecommerce?",
        filterProperty: "Overtitle",
        filterValue: ["Takedown request", "Online protection", "Marketplace enforcement"],
        expectedAnswer: "Yes"
    },
        {
        text: "Has someone applied for a trade mark that is similar to yours?",
        filterProperty: "Overtitle",
        filterValue: ["Opposition", "revocation", "Challenge", "IP attorney"],
        expectedAnswer: "Yes"
    },
    {
        text: "Can you identify or contact the other party?",
        filterProperty: "Overtitle",
        filterValue: ["letter of demand", "Informal contact", "IP attorney","negotiate", "ASBFEO"],
        expectedAnswer: "Yes"
    },
    {
        text: "Would you prefer to avoid formal legal proceedings if possible?",
        filterProperty: "Overtitle",
        filterValue: ["Court", "Interim court", "Arbitration", "Negotiation"],
        expectedAnswer: "No"
    },
    {
        text: "Would you consider working with an IP professional on this issue?",
        filterProperty: "Overtitle",
        filterValue: ["IP attorney", "IP assessment", "professional"],
        expectedAnswer: "Yes"
    },
    {
        text: "Does this dispute relate to a domain name?",
        filterProperty: "Overtitle",
        filterValue: ["Domain Name", "UDRP", "WIPO", "takedown"],
        expectedAnswer: "Yes"
    },
    {
        text: "Does the other party have a trade mark you have an issue with?",
        filterProperty: "Overtitle",
        filterValue: ["Opposition", "Register", "trade mark", "revocation", "WIPO"],
        expectedAnswer: "Yes"
    },
    {
        text: "Is there an ongoing relationship with the other party that is likely to continue?",
        filterProperty: "Context",
        filterValue: ["Negotiation", "Mediation"],
        expectedAnswer: "Yes"
    },
    {
        text: "Do you believe negotiations could be possible in this situation?",
        filterProperty: "Resolution Approach",
        filterValue: ["Negotiation", "Mediation"],
        expectedAnswer: "Yes"
    },
    {
        text: "Is the trade mark application currently in its opposition and hearing period?",
        filterProperty: "Status",
        filterValue: ["Opposition", "Hearing", "IP Australia", "Revocation"],
                filterProperty: "Response Type",
        filterValue: ["Opposition"],
        expectedAnswer: "Yes"
    },
    {
        text: "Do you think a particular trade mark should not be registered?",
        filterProperty: "Response Type",
        filterValue: ["Opposition"],
        expectedAnswer: "Yes"
    },
        {
        text: "Has someone accused you of infringement?",
        filterProperty: "Response Type",
        filterValue: ["Accused", "Opposition"],
        expectedAnswer: "Yes"
    },
    {
        text: "Do you suspect your trade mark is being infringed?",
        filterProperty: "Response Type",
        filterValue: ["Enforcement", "Opposition"],
        expectedAnswer: "Yes"
    },
    {
        text: "Is the suspected infringement happening in Australia?",
        filterProperty: "Location",
        filterValue: ["Australia"],
        filterProperty: "Response Type",
        filterValue: ["Enforcement"],
        expectedAnswer: "Yes"
    },
    {
        text: "Do you believe the other party is unable or unwilling to engage in discussions about this matter?",
        filterProperty: "Engagement",
        filterValue: ["Other party uncooperative"],
        expectedAnswer: "Yes"
    },
    {
        text: "Are you unable or unwilling to engage in discussions with the other party about this matter?",
        filterProperty: "Engagement",
        filterValue: ["You are uncooperative"],
                filterProperty: "Response Type",
        filterValue: ["Enforcement"],
        expectedAnswer: "Yes"
    }
];


        // Variables to track state
        let filteredOptions = [...tradeMarkOptions];
        let activeOptions = [...tradeMarkOptions];
        let currentQuestionIndex = 0;
        let userResponses = {};
        let filterStatements = [];

        // Function to update filter statements list
        function updateFilterList() {
            const filterList = document.getElementById('filter-list');
            if (!filterList) {
                console.error('Filter list element not found');
                return;
            }
            
            filterList.innerHTML = '';
            
            filterStatements.forEach((statement, index) => {
                const listItem = document.createElement('li');
                
                // Add statement text
                const statementSpan = document.createElement('span');
                statementSpan.textContent = statement;
                listItem.appendChild(statementSpan);
                
                // Add remove icon
                const removeIcon = document.createElement('span');
                removeIcon.className = 'remove-filter';
                removeIcon.textContent = 'Ã—'; // Using the multiplication symbol as a cross
                removeIcon.setAttribute('title', 'Remove this filter');
                removeIcon.setAttribute('data-index', index);
                removeIcon.addEventListener('click', function() {
                    removeFilter(index);
                });
                listItem.appendChild(removeIcon);
                
                filterList.appendChild(listItem);
            });
            
            // Show/hide the filter list container based on whether there are any statements
            const filterListContainer = document.getElementById('filter-list-container');
            if (filterListContainer) {
                if (filterStatements.length > 0) {
                    filterListContainer.style.display = 'block';
                } else {
                    filterListContainer.style.display = 'none';
                }
            }
        }
        
    // Function to remove a filter and reapply all remaining filters
function removeFilter(index) {
    // Get the question index associated with this filter
    const questionIndex = Object.keys(userResponses).find(key => 
        generateFilterStatement(parseInt(key), userResponses[key]) === filterStatements[index]
    );
    
    if (questionIndex) {
        // Remove this response
        delete userResponses[questionIndex];
        
        // Remove the filter statement
        filterStatements.splice(index, 1);
        
        // Reset active options to all options
        activeOptions = [...tradeMarkOptions];
        
        // Reapply all remaining filters
        for (const [qIndex, response] of Object.entries(userResponses)) {
            filterOptionsWithoutCount(parseInt(qIndex), response);
        }
        
        // Update the UI
        updateFilterList();
        renderOptions();
        
        // Display the question that was just unfiltered so user can answer it again
        currentQuestionIndex = parseInt(questionIndex);
        displayQuestion();
        
        // Make sure the question section is visible
        const questionSection = document.getElementById('question-section');
        if (questionSection) {
            questionSection.classList.remove('hidden');
        }
        
        // Remove any completion message that might be showing
        const completionMessage = document.getElementById('completion-message');
        if (completionMessage) {
            completionMessage.remove();
        }
    }
}
        
        // A version of filterOptions that doesn't return count (for reapplying filters)
        function filterOptionsWithoutCount(questionIndex, userAnswer) {
            const question = filterQuestions[questionIndex];
            
            // If user skipped, don't filter
            if (userAnswer === 'Skip') {
                return;
            }
            
            // Determine if we should keep or remove items based on match
            const keepMatches = (userAnswer === question.expectedAnswer);
            
            // Create a copy of active options for filtering
            const newActiveOptions = [...activeOptions];
            
            // Count how many options would be removed
            let removedCount = 0;
            
            newActiveOptions.forEach(option => {
                const propertyValue = option[question.filterProperty];
                
                // Check if the option matches the filter criteria
                let isMatch = false;
                
                if (Array.isArray(question.filterValue)) {
                    // If filter value is an array, check if any value matches
                    isMatch = question.filterValue.some(value => 
                        propertyValue.includes(value)
                    );
                } else {
                    // If filter value is a string, check if it's included
                    isMatch = propertyValue.includes(question.filterValue);
                }
                
                // If this option would be removed, increment count
                if (keepMatches ? !isMatch : isMatch) {
                    removedCount++;
                }
            });
            
            // Limit the number of options removed to 15 at most
            if (removedCount > 15) {
                // We need to keep some options that would normally be filtered out
                let toKeep = removedCount - 15;
                
                // Filter the active options
                activeOptions = activeOptions.filter(option => {
                    const propertyValue = option[question.filterProperty];
                    
                    // Check if the option matches the filter criteria
                    let isMatch = false;
                    
                    if (Array.isArray(question.filterValue)) {
                        // If filter value is an array, check if any value matches
                        isMatch = question.filterValue.some(value => 
                            propertyValue.includes(value)
                        );
                    } else {
                        // If filter value is a string, check if it's included
                        isMatch = propertyValue.includes(question.filterValue);
                    }
                    
                    // Keep the option if it matches the filter criteria (or doesn't, depending on the expected answer)
                    const shouldKeep = keepMatches ? isMatch : !isMatch;
                    
                    // If we should remove this option but we need to keep some extra ones
                    if (!shouldKeep && toKeep > 0) {
                        toKeep--;
                        return true; // Keep this one anyway
                    }
                    
                    return shouldKeep;
                });
            } else {
                // Normal filtering when removing fewer than 15 options
                activeOptions = activeOptions.filter(option => {
                    const propertyValue = option[question.filterProperty];
                    
                    // Check if the option matches the filter criteria
                    let isMatch = false;
                    
                    if (Array.isArray(question.filterValue)) {
                        // If filter value is an array, check if any value matches
                        isMatch = question.filterValue.some(value => 
                            propertyValue.includes(value)
                        );
                    } else {
                        // If filter value is a string, check if it's included
                        isMatch = propertyValue.includes(question.filterValue);
                    }
                    
                    // Keep or remove based on whether this is a match and what answer was expected
                    return keepMatches ? isMatch : !isMatch;
                });
            }
        }
        

            
  // Function to generate filter statement based on question and answer
function generateFilterStatement(questionIndex, answer) {
    const question = filterQuestions[questionIndex];
    
    if (answer === 'Skip') {
        return null; // No statement for skipped questions
    }
    
    // Generate statements based on the question and answer
    switch (questionIndex) {
        case 0: // Are you responding to an issue of suspected or accused infringment?
            return answer === 'Yes' 
                ? 'Options which help respond to suspected infringement' 
                : 'Options which are proactive';
        case 1: // Are goods relating to your trade mark being imported into Australia?
            return answer === 'Yes' 
                ? 'Options which address imported goods issues' 
                : 'Options which do not involve imported goods';
        case 2: // Is this dispute related to online marketplace or ecommerce?
            return answer === 'Yes' 
                ? 'Options which address online marketplace issues' 
                : 'Options which do not involve online marketplaces';
        case 3: // Has someone applied for a trade mark that is similar to yours?
            return answer === 'Yes' 
                ? 'Options which challenge trade mark applications' 
                : 'Options which do not involve challenging trade marks';
        case 4: // Can you identify or contact the other party?
            return answer === 'Yes' 
                ? 'Options which involve contacting the other party' 
                : 'Options which do not require contacting the other party';
        case 5: // Would you prefer to avoid formal legal proceedings if possible?
            return answer === 'Yes' 
                ? 'Options which avoid formal legal proceedings' 
                : 'Options which include formal legal proceedings';
        case 6: // Would you consider working with an IP professional on this issue?
            return answer === 'Yes' 
                ? 'Options which involve IP professionals' 
                : 'Options which do not require IP professionals';
        case 7: // Does this dispute relate to a domain name?
            return answer === 'Yes' 
                ? 'Options which address domain name disputes' 
                : 'Options which do not involve domain names';
        case 8: // Does the other party have a trade mark you have an issue with?
            return answer === 'Yes' 
                ? 'Options which challenge existing trade marks' 
                : 'Options which do not involve challenging existing trade marks';
        case 9: // Is there an ongoing relationship with the other party?
            return answer === 'Yes' 
                ? 'Options which preserve business relationships' 
                : 'Options which do not prioritize relationship preservation';
        case 10: // Do you believe negotiations could be possible?
            return answer === 'Yes' 
                ? 'Options which involve negotiation approaches' 
                : 'Options which do not rely on negotiations';
        case 11: // Is the trade mark application currently in its opposition period?
            return answer === 'Yes' 
                ? 'Options which address trade marks in opposition period' 
                : 'Options which do not involve opposition period actions';
        case 12: // Do you think a particular trade mark should not be registered?
            return answer === 'Yes' 
                ? 'Options which challenge trade mark registrations' 
                : 'Options which do not involve registration challenges';
        case 13: // Are you trying to defend against someone else's claim?
            return answer === 'Yes' 
                ? 'Options which defend against infringement claims' 
                : 'Options which do not involve defending against claims';
        case 14: // Are you trying to enforce your trade mark rights?
            return answer === 'Yes' 
                ? 'Options which enforce your trade mark rights' 
                : 'Options which do not involve enforcement actions';
        case 15: // Is the infringement happening in Australia?
            return answer === 'Yes' 
                ? 'Options which address Australian infringements' 
                : 'Options which address international infringements';
        case 16: // Is the other party unable/unwilling to engage?
            return answer === 'Yes' 
                ? 'Options which work with uncooperative parties' 
                : 'Options which require cooperation from both parties';
        case 17: // Are you unable/unwilling to engage with the other party?
            return answer === 'Yes' 
                ? 'Options which avoid direct engagement' 
                : 'Options which involve direct engagement';
        default:
            return null;
    }
}

        // Function to shuffle array (for random initial display)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Function to render options
        function renderOptions() {
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            // First render active options
            const activeCards = activeOptions.map(option => {
                return createOptionCard(option, false);
            });
            
            // Then render filtered out options
            const filteredOutOptions = filteredOptions.filter(option => !activeOptions.includes(option));
            const filteredCards = filteredOutOptions.map(option => {
                return createOptionCard(option, true);
            });
            
            // Append all cards to container
            activeCards.forEach(card => container.appendChild(card));
            filteredCards.forEach(card => container.appendChild(card));
            
            // Update summary box
            updateSummary();
        }

        // Function to create an option card
        function createOptionCard(option, isFiltered) {
            const card = document.createElement('div');
            card.className = `card ${isFiltered ? 'filtered' : ''}`;
            
            // Add a data attribute for sorting
            card.dataset.cost = Math.floor(Math.random() * 5) + 1; // Mock data for sorting
            card.dataset.time = Math.floor(Math.random() * 5) + 1; // Mock data for sorting
            card.dataset.escalation = Math.floor(Math.random() * 5) + 1; // Mock data for sorting
            
            // Overtitle
            const overtitle = document.createElement('div');
            overtitle.className = 'card-overtitle';
            overtitle.textContent = option.Overtitle;
            card.appendChild(overtitle);
            
            // Main Title
            const title = document.createElement('div');
            title.className = 'card-title';
            title.textContent = option["Main Title"];
            card.appendChild(title);
            
            // Description
            const description = document.createElement('div');
            description.className = 'card-subtitle';
            description.textContent = option.Description;
            card.appendChild(description);
            
            // Tags for IP type
            const rightTypes = option["Right it applies to"].split(';').map(t => t.trim());
            rightTypes.forEach(type => {
                const tag = document.createElement('span');
                tag.className = `feature-tag ${type.toLowerCase().includes('trade mark') ? 'tag-trade-mark' : 'tag-any'}`;
                tag.textContent = type;
                card.appendChild(tag);
            });
            
            // Response type tags
            const responseTypes = option["Response Type"].split(';').map(t => t.trim());
            responseTypes.forEach(type => {
                const tag = document.createElement('span');
                tag.className = 'response-tag';
                tag.textContent = type;
                card.appendChild(tag);
            });
            
            return card;
        }

        // Function to update summary box
        function updateSummary() {
            // Update the summary indicator in the sidebar
            const summaryCount = document.getElementById('summary-count');
            summaryCount.textContent = `${activeOptions.length} likely relevant options to consider of ${tradeMarkOptions.length} total`;
        }

        // Function to filter options based on user response to a question
        function filterOptions(questionIndex, userAnswer) {
            const question = filterQuestions[questionIndex];
            
            // If user skipped, don't filter
            if (userAnswer === 'Skip') {
                return 0; // No options removed
            }
            
            const previousActiveCount = activeOptions.length;
            
            // Determine if we should keep or remove items based on match
            const keepMatches = (userAnswer === question.expectedAnswer);
            
            // Create a copy of active options for filtering
            const newActiveOptions = [...activeOptions];
            
            // Count how many options would be removed
            let removedCount = 0;
            
            newActiveOptions.forEach((option, index) => {
                const propertyValue = option[question.filterProperty];
                
                // Check if the option matches the filter criteria
                let isMatch = false;
                
                if (Array.isArray(question.filterValue)) {
                    // If filter value is an array, check if any value matches
                    isMatch = question.filterValue.some(value => 
                        propertyValue.includes(value)
                    );
                } else {
                    // If filter value is a string, check if it's included
                    isMatch = propertyValue.includes(question.filterValue);
                }
                
                // If this option would be removed, increment count
                if (keepMatches ? !isMatch : isMatch) {
                    removedCount++;
                }
            });
            
            // Limit the number of options removed to 15 at most
            if (removedCount > 15) {
                // We need to keep some options that would normally be filtered out
                let toKeep = removedCount - 15;
                
                // Filter the active options
                activeOptions = activeOptions.filter(option => {
                    const propertyValue = option[question.filterProperty];
                    
                    // Check if the option matches the filter criteria
                    let isMatch = false;
                    
                    if (Array.isArray(question.filterValue)) {
                        // If filter value is an array, check if any value matches
                        isMatch = question.filterValue.some(value => 
                            propertyValue.includes(value)
                        );
                    } else {
                        // If filter value is a string, check if it's included
                        isMatch = propertyValue.includes(question.filterValue);
                    }
                    
                    // Keep the option if it matches the filter criteria (or doesn't, depending on the expected answer)
                    const shouldKeep = keepMatches ? isMatch : !isMatch;
                    
                    // If we should remove this option but we need to keep some extra ones
                    if (!shouldKeep && toKeep > 0) {
                        toKeep--;
                        return true; // Keep this one anyway
                    }
                    
                    return shouldKeep;
                });
                
                return 15; // We limited removal to 15 options
            } else {
                // Normal filtering when removing fewer than 15 options
                activeOptions = activeOptions.filter(option => {
                    const propertyValue = option[question.filterProperty];
                    
                    // Check if the option matches the filter criteria
                    let isMatch = false;
                    
                    if (Array.isArray(question.filterValue)) {
                        // If filter value is an array, check if any value matches
                        isMatch = question.filterValue.some(value => 
                            propertyValue.includes(value)
                        );
                    } else {
                        // If filter value is a string, check if it's included
                        isMatch = propertyValue.includes(question.filterValue);
                    }
                    
                    // Keep or remove based on whether this is a match and what answer was expected
                    return keepMatches ? isMatch : !isMatch;
                });
                
                // Return the number of options removed
                return previousActiveCount - activeOptions.length;
            }
        }

        // Function to display the current question
// Function to display the current question
function displayQuestion() {
    const questionSection = document.getElementById('question-section');
    
    if (!questionSection) {
        console.error('Question section element not found');
        return;
    }
    
    // Always ensure the question section is visible
    questionSection.classList.remove('hidden');
    
    // If we've gone through all questions, show a message in the question container instead
    if (currentQuestionIndex >= filterQuestions.length) {
        const questionElement = document.getElementById('current-question');
        if (questionElement) {
            questionElement.textContent = "You've answered all available questions. You can remove filters to answer questions again.";
        }
        
        // Hide the buttons when there are no more questions
        const buttonsContainer = document.querySelector('.question-buttons');
        if (buttonsContainer) {
            buttonsContainer.style.display = 'none';
        }
    } else if (activeOptions.length <= 7) {
        // If we have 7 or fewer options, show a different message
        const questionElement = document.getElementById('current-question');
        if (questionElement) {
            questionElement.textContent = "That's enough filtering. You can remove filters to answer questions again.";
        }
        
        // Hide the buttons when we have few enough options
        const buttonsContainer = document.querySelector('.question-buttons');
        if (buttonsContainer) {
            buttonsContainer.style.display = 'none';
        }
    } else {
        // Show the current question and make sure buttons are visible
        const questionElement = document.getElementById('current-question');
        if (questionElement) {
            questionElement.textContent = filterQuestions[currentQuestionIndex].text;
        }
        
        // Make sure buttons are visible for answering
        const buttonsContainer = document.querySelector('.question-buttons');
        if (buttonsContainer) {
            buttonsContainer.style.display = 'flex';
        }
    }
    
    // Update summary count
    updateSummary();
}

// Function to handle user responses to questions
function handleQuestionResponse(response) {
    // Record the response
    userResponses[currentQuestionIndex] = response;
    
    // Filter options based on the response
    filterOptions(currentQuestionIndex, response);
    
    // Generate and add filter statement if not skipped
    const statement = generateFilterStatement(currentQuestionIndex, response);
    if (statement) {
        filterStatements.push(statement);
        updateFilterList();
    }

    activeOptions = shuffleArray([...activeOptions]);      //Shuffel all the options

    renderOptions();      // Rerender options with animation

    
    // Move to the next question after a delay
    setTimeout(() => {
        currentQuestionIndex++;
        
        // Always display the question container, even if it's showing a completion message
        displayQuestion();
    }, 500);
}

        // Function to sort options
        function sortOptions(sortBy) {
            if (sortBy === 'random') {
                activeOptions = shuffleArray([...activeOptions]);
            } else {
                activeOptions.sort((a, b) => {
                    // Get the corresponding cards to access the dataset attributes
                    const cardA = document.querySelector(`.card:not(.filtered) [data-${sortBy}="${a.id}"]`);
                    const cardB = document.querySelector(`.card:not(.filtered) [data-${sortBy}="${b.id}"]`);
                    
                    // If we can't find the cards, fallback to random order
                    if (!cardA || !cardB) return Math.random() - 0.5;
                    
                    // Sort based on the data attribute
                    return parseInt(cardA.dataset[sortBy]) - parseInt(cardB.dataset[sortBy]);
                });
            }
            
            renderOptions();
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            // Assign IDs to options for tracking
            tradeMarkOptions.forEach((option, index) => {
                option.id = index;
            });
            
            // Shuffle options initially
            activeOptions = shuffleArray([...tradeMarkOptions]);
            filteredOptions = [...tradeMarkOptions];
            
            // Render initial options
            renderOptions();
            
            // Display the first question
            displayQuestion();
            
            // Initially hide the filter list container
            document.getElementById('filter-list-container').style.display = 'none';
            
            // Add event listeners
            document.getElementById('btn-yes').addEventListener('click', () => handleQuestionResponse('Yes'));
            document.getElementById('btn-no').addEventListener('click', () => handleQuestionResponse('No'));
            document.getElementById('btn-skip').addEventListener('click', () => handleQuestionResponse('Skip'));
            
            // Add sort listener
            document.getElementById('sort-select').addEventListener('change', (e) => {
                sortOptions(e.target.value);
            });
        });
    </script>
</body>
</html>
